<!doctype html>

<html>
  <head>
    <title>D3 test</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
  </head>
  <style>
    svg {
      background-color: grey;
    }
  </style>
  <body>
    <script>
      var data = {
        nodes: [{
          id : 1,
          name: "A",
          x: 600,
          y: 100
        }, {
          id : 2,
          name: "B",
          x: 300,
          y: 300
        }, {
          id : 3,
          name: "C",
          x: 600,
          y: 300
        }, {
          id : 4,
          name: "D",
          x: 900,
          y: 300
        }],
        links: [{
            source: {
              id : 1,
              x: 650,
              y: 200
            },
            target: {
              id : 2,
              x: 350,
              y: 300
            }
        }, {
          source: {
              id : 1,
              x: 650,
              y: 200
            },
            target: {
              id : 3,
              x: 650,
              y: 300
            }
        }, {
          source: {
              id : 1,
              x: 650,
              y: 200
            },
          target: {
              id : 4,
              x: 950,
              y: 300
            }
          }, 
        ]
 };

 var c10 = d3.scale.category10();
 var svg = d3.select("body")
   .append("svg")
   .attr("width", 1200)
   .attr("height", 800);

 /*var drag = d3.behavior.drag()
   .on("drag", function(d, i) {
     d.x += d3.event.dx
     d.y += d3.event.dy
     d3.select(this).attr("cx", d.x).attr("cy", d.y);
     links.each(function(l, li) {
       if (l.source == i) {
         d3.select(this).attr("x1", d.x).attr("y1", d.y);
       } else if (l.target == i) {
         d3.select(this).attr("x2", d.x).attr("y2", d.y);
       }
     });
   });*/

 var links = svg.selectAll("link")
   .data(data.links)
   .enter()
   .append("line")
   .attr("class", "link")
   .attr("x1", function(d) {return d.source.x})
    .attr("y1", function(d){return d.source.y})
     //var sourceNode = data.nodes.filter(function(d, i) {
     //  return d.id == l.source
     //})[0];
     //d3.select(this).attr("y1", sourceNode.y);
     //return sourceNode.x
   //})
   //.attr("x2", function(l) {
   //  var targetNode = data.nodes.filter(function(d, i) {
   //    return i == l.target
   //  })[0];
   //  d3.select(this).attr("y2", targetNode.y);
   //  return targetNode.x
   //})
   .attr("x2", function(d){return d.target.x})
   .attr("y2", function(d){return d.target.y})
   .attr("fill", "none")
   .attr("stroke", "black");

 var nodes = svg.selectAll("node")
   .data(data.nodes)
   .enter()
   .append("rect")
   .attr("class", "node")
   .attr("x", function(d) {
     return d.x
   })
   .attr("y", function(d) {
     return d.y
   })
   .attr("width", 100)
   .attr("height", 100)
   //.attr("r", 15)
   .attr("fill", "white")
   //.attr("fill", function(d, i) {
    // return c10(i);
   //})
   //.call(drag)
   ;

    </script>
  </body>
</html>